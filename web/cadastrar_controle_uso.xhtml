<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <head jsf:id="head">
        <title>Controle de Uso</title>
        <link rel="stylesheet" type="text/css" href="css/styles.css" />
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    </head>
    <body jsf:id="body">
        <form jsf:id="form" jsf:prependId="false">
            <a href="index.xhtml" class="btn btn-primary">Voltar</a>
            <h3>Listagem de Impressões</h3>

            <div class="dropdown"><!-- Dropdown -->
                <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                    Selecione um Usuário
                </button>
                <div class="dropdown-menu">
                    <ui:repeat var="c" value="#{cadastroUsuario.list()}" >
                        <a class="dropdown-item" href="#" jsf:action="#{cadastroUsuario.setUsuario(c)}">
                            #{c.nome}
                        </a>
                    </ui:repeat>
                </div>
            </div>

            <br/><br/>
            <h3>Impressões</h3>
            <label> Impressora </label>
            <input type="text" jsf:id="nome" class="form-control"
                   jsf:value="#{cadastroUsuario.usuario.nome}" />
            <br />
            <label> ID: </label>
            <input type="text" jsf:id="fk_impressora" class="form-control"
                   value="#{cadastroUsuario.usuario.id}"
                   jsf:value="#{controleUsoImpressoraBean.casosuso.fk_usuario}"
                   />


            <br/><br/>
            <div class="dropdown"><!-- Dropdown -->
                <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                    Selecione uma Impressora
                </button>
                <div class="dropdown-menu">
                    <ui:repeat var="c" value="#{cadastroImpressora.list()}" >
                        <a class="dropdown-item" href="#" jsf:action="#{cadastroImpressora.setImpressora(c)}">
                            #{c.impressora}
                        </a>
                    </ui:repeat>
                </div>
            </div>

            <br/><br/>
            <h3>Impressões</h3>
            <label> Impressora: </label>
            <input type="text" jsf:id="impressora" class="form-control"
                   jsf:value="#{cadastroImpressora.impressora.impressora}" />
            <br />
            <label> ID: </label>
            <input type="text" jsf:id="fk_usuario" class="form-control" 
                   value="#{cadastroImpressora.impressora.id}"
                   jsf:value="#{controleUsoImpressoraBean.casosuso.fk_impressora}"/> 


            <label> Quantida de páginas </label>
            <input type="number" jsf:id="qtd" class="form-control"
                   jsf:value="#{controleUsoImpressoraBean.casosuso.qtde_paginas}" />

            <label> Data Atual </label>
            <input type="text" jsf:id="dataatual" class="form-control"
                   value="#{controleUsoImpressoraBean.dataAtual}" 
                   jsf:value="#{controleUsoImpressoraBean.casosuso.data}"
                   />



            <br /><br />
            <div class="d-flex justify-content-center constainer">
            <a href="#" class="btn btn-primary btn-lg" 
               style="margin-right:10px;"
               jsf:action="#{controleUsoImpressoraBean.save()}">Salvar</a>
            </div>
            
            
            <br /> <br />
            
             <table class="table table-striped table-hover">
                   <tr>
                       <td>Impressora Id</td>
                       <td>Usuario Id</td>
                       <td>quantidade de páginas</td>
                   </tr>
                 <ui:repeat var="controleuso" value="#{controleUsoImpressoraBean.list()}" >
                    <tr>
                        <td>#{controleuso.fk_impressora}</td>
                        <td>#{controleuso.fk_usuario}</td>
                        <td>#{controleuso.qtde_paginas}</td>
                     </tr>
                  </ui:repeat>
                   
               </table>
            
        </form>
    </body>
</html>




